<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philly Police Barchart</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
    <h1> Washington D.C Barchart of Police Budget</h1>
    
   
    <script type="text/javascript"> 

 
        var w = 500;
        var h = 500;
        // var margin={top:50,bottom:50,left:50,right:50}
        var cellpadding = 5;
       
        var svg = d3.select("body").append("svg")
            .attr("width", w)
        //  console.log(w)
            .attr("height", h);

        d3.csv('Capstone Police Budget Data - WashingtonDCBudget.csv')
        .then(function(data){
                
                var yScale = d3.scaleLinear()
                .domain([0, d3.max(data, function(d){
                    
                    return +d.Amount;
                })])
                .range([0, h/2]);
                var colorScale = d3.scaleLinear()
                    .domain([0, d3.max(data, function(d){
                    return +d.Amount;
                    })])
                .range([255, 0]);

                 svg.selectAll("rect")
                    
                    .data(data)
                    .enter()
                    .append("rect")
                        .attr('width',w/data.length-cellpadding)
                        .attr('height',h)
                         .attr("x", function(d, i){
                             return w / data.length * i;
                         })
                            .attr("height", function(d){
                                return yScale(d.Amount);
                            })

                            .attr("y", function(d){
                                return h/2-yScale(d.Amount);   
                            })

                            .attr("fill", function(d){
                            
                                var f = colorScale(d.Amount);
                                if (f > d3.max(d.Amount))
                                    return "rgb(" + 203 + ",195,227)";
                                else
                                    return "rgb(" + 138 + ",43,226)";
                                
                                
                            });

                            svg.selectAll("text")
                                .data(data)
                                .enter()
                                .append("text")
                                .text(function(d){
                                    return d.Attrbuttes;  
                                 })

                            .attr("transform", function(d, i){
                            return "translate(" + w / data.length * i +
                            ","+h/2+")"+"rotate(90)"

                            })

                            var scale = d3.scaleLinear()
                                .domain([0, d3.max(data, function(d){
                                    return d.Amount; 
                                })])
                                .range([h/2, 0])
                                // .domain([0, d3.max(data, function(d){
                                //     ([d3.min(d.Amount), d3.max(d.Amount)]

                                // })])
                                

                            var y_axis = d3.axisLeft()
                                .scale(scale);

                            svg.append("g")
                                .attr("transform", "translate(50, 10)")
                                .call(y_axis);

                            

                           

           
                //     var yScale = d3.scaleLog()
                //         .range([h - cellpadding, cellpadding])
                //         .domain([d3.min(data), d3.max(data)]);
                //         .attr("width",w/data.length-cellpadding)
                //         .attr("height",h)
                //             .attr("x",function(d,i){
                //                 return w/data.length *i;
                //             })
                //             .attr("height", function(d){
                //                 return d.Amount / 160 * h;
                //             })
           
                //                  .attr("width",w/data.length-cellpadding)
                //         .attr("height",h)
                //             .attr("x", function(d, i){
                //                 // console.log(w / data.length * i);
                //                 return w / data.length * i;
                                
                //             } )
                //             .attr("height", function(d){
                //                 // console.log(d.Amount)
                //                  return d.Amount;
                             })






























        // const x = d3.scaleBand()
        //     .domain(d3.range(data.length))
        //     .range([margin.left,width-margin.right])
        //     .padding (.1);

        // const y = d3.scaleLinear()
        //     .domain([0,12000000000])
        //     .range([height-margin.bottom,margin.top]);
        // // console.log(data[0]['Amount'])
        // // console.log(data.length)
       
        // for (let i = 0; i< data.length; i++) {
        //     console.log(data[i]['Amount'])
        //     svg     
                


        //         .append('g')
        //         .attr("fill",'royalblue')
        //         .selectAll('rect')  
        //         .data(data[i]['Amount'])
        //         .join('rect')
        //             .attr('x',(d,i)=>x(i))
        //             .attr('y', d => (data[i]['Amount']))
        //             //.attr('height',d => y(0) - y(data[i]['Amount']))
        //             .attr('width',x.bandwidth())
        // }
        // svg.node();



            

           
            
            // .join('rect')
            //     .attr('x',(d,i)=>x(i))
            //     .attr('y',(d)=> y(d.Amount))
                
            //     .attr('height', d =>y(0)-y(d.Amount))
            //             .attr('width',x.bandwidth())
            // svg.node();  
                    
        //         console.log(data);
        

               
           
           

                
        //  } )

    

        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </script>
    
</body>
</html>